<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeuroAI - Brain Tumor Classification</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: system-ui, -apple-system, sans-serif; background-color: #f8f9fa; }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 2rem; }
        .header { background: white; padding: 1rem 0; border-bottom: 1px solid #e5e7eb; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .header-content { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 1.5rem; font-weight: bold; color: #2563eb; }
        .nav { display: flex; gap: 2rem; }
        .nav a { color: #6b7280; text-decoration: none; }
        .main { padding: 3rem 0; }
        .hero { text-align: center; margin-bottom: 3rem; }
        .hero h1 { font-size: 3rem; font-weight: bold; color: #1f2937; margin-bottom: 1rem; }
        .hero p { font-size: 1.25rem; color: #6b7280; max-width: 800px; margin: 0 auto; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; align-items: start; }
        .card { background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .upload-area { border: 2px dashed #d1d5db; border-radius: 12px; padding: 2rem; text-align: center; margin-bottom: 1rem; }
        .btn { padding: 12px 24px; border-radius: 8px; border: none; font-size: 1rem; cursor: pointer; margin-right: 1rem; }
        .btn-primary { background: #2563eb; color: white; }
        .btn-secondary { background: #6b7280; color: white; }
        .btn:disabled { background: #9ca3af; cursor: not-allowed; }
        .features { margin-top: 4rem; }
        .features h2 { text-align: center; font-size: 2rem; margin-bottom: 2rem; color: #1f2937; }
        .features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem; }
        .feature-card { background: white; padding: 2rem; border-radius: 12px; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .feature-icon { font-size: 3rem; margin-bottom: 1rem; }
        .disclaimer { margin-top: 3rem; background: #fef3c7; border: 1px solid #f59e0b; border-radius: 12px; padding: 1.5rem; }
        .disclaimer h3 { color: #92400e; margin-bottom: 1rem; }
        .disclaimer p { color: #92400e; }
        .progress-bar { width: 100px; height: 8px; background: #e5e7eb; border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; background: #2563eb; border-radius: 4px; transition: width 0.3s; }
        .result-item { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem; }
        .result-prediction { background: #dbeafe; padding: 1rem; border-radius: 8px; margin-bottom: 1rem; }
        .spinner { width: 40px; height: 40px; border: 4px solid #e5e7eb; border-top-color: #2563eb; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 1rem; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        @media (max-width: 768px) { .grid { grid-template-columns: 1fr; } .hero h1 { font-size: 2rem; } }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">NeuroAI - Brain Tumor Classification</div>
                <nav class="nav">
                    <a href="#home">Home</a>
                    <a href="#analyze">Analyze</a>
                    <a href="#about">About</a>
                </nav>
            </div>
        </div>
    </header>

    <main class="container">
        <section class="hero">
            <h1>AI-Powered Brain Tumor Classification</h1>
            <p>Advanced deep learning technology that analyzes brain MRI scans with medical-grade accuracy. Get instant predictions with visual explanations.</p>
        </section>

        <div class="grid">
            <!-- MRI Gallery Section -->
            <div class="card">
                <h2 style="font-size: 1.5rem; margin-bottom: 1rem; color: #1f2937;">MRI Scan Gallery</h2>
                
                <div style="text-align: center; margin-bottom: 1.5rem;">
                    <div id="mriDisplay" style="width: 300px; height: 300px; margin: 0 auto; border: 2px solid #e5e7eb; border-radius: 12px; overflow: hidden; background: #f9fafb; display: flex; align-items: center; justify-content: center;">
                        <img id="currentMRI" src="" alt="MRI Scan" style="width: 100%; height: 100%; object-fit: cover; display: none;">
                        <p id="loadingMRI" style="color: #6b7280;">Loading MRI scan...</p>
                    </div>
                </div>

                <div style="text-align: center; margin-bottom: 1rem;">
                    <p id="scanInfo" style="color: #6b7280; margin-bottom: 1rem;">Scan 1 of 12</p>
                    <div style="display: flex; gap: 1rem; justify-content: center; margin-bottom: 1rem;">
                        <button class="btn btn-secondary" onclick="previousScan()" id="prevBtn">← Previous</button>
                        <button class="btn btn-secondary" onclick="shuffleScan()" id="shuffleBtn">Shuffle</button>
                        <button class="btn btn-secondary" onclick="nextScan()" id="nextBtn">Next →</button>
                    </div>
                    <button class="btn btn-primary" onclick="analyzeCurrentScan()" id="analyzeBtn">Analyze This Scan</button>
                </div>
            </div>

            <!-- Results Section -->
            <div class="card">
                <h2 style="font-size: 1.5rem; margin-bottom: 1rem; color: #1f2937;">Analysis Results</h2>

                <div id="loading" style="display: none; text-align: center; padding: 2rem;">
                    <div class="spinner"></div>
                    <p style="color: #6b7280;">Analyzing your MRI scan...</p>
                </div>

                <div id="results" style="display: none;">
                    <div class="result-prediction">
                        <h3 id="predictionClass" style="color: #1e40af; margin: 0 0 0.5rem 0;"></h3>
                        <p id="predictionConfidence" style="color: #1e40af; margin: 0;"></p>
                    </div>

                    <div>
                        <h4 style="margin-bottom: 1rem; color: #1f2937;">Probability Distribution:</h4>
                        <div id="probabilities"></div>
                    </div>
                </div>

                <div id="placeholder" style="text-align: center; padding: 2rem; color: #9ca3af;">
                    <p>Select an MRI scan from the gallery to see AI analysis results</p>
                </div>
            </div>
        </div>

        <!-- Features Section -->
        <section class="features">
            <h2>Key Features</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">Brain</div>
                    <h3 style="margin-bottom: 1rem; color: #1f2937;">Advanced AI</h3>
                    <p style="color: #6b7280;">Deep learning models trained on medical imaging data with 95.2% accuracy</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">Eye</div>
                    <h3 style="margin-bottom: 1rem; color: #1f2937;">Visual Explanations</h3>
                    <p style="color: #6b7280;">Saliency maps showing AI attention areas for transparent decision making</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">Fast</div>
                    <h3 style="margin-bottom: 1rem; color: #1f2937;">Fast Analysis</h3>
                    <p style="color: #6b7280;">Get results in seconds with confidence scores and detailed breakdown</p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">Shield</div>
                    <h3 style="margin-bottom: 1rem; color: #1f2937;">4 Tumor Types</h3>
                    <p style="color: #6b7280;">Classifies Glioma, Meningioma, Pituitary tumors, or No Tumor detected</p>
                </div>
            </div>
        </section>

        <!-- Disclaimer -->
        <div class="disclaimer">
            <h3>Medical Disclaimer</h3>
            <p>This AI tool is for educational and research purposes only. It should not be used for medical diagnosis. Always consult qualified healthcare professionals for medical advice and diagnosis.</p>
        </div>
    </main>

    <script>
        // MRI scan database with realistic medical cases
        const mriScans = [
            {
                id: 1,
                imageUrl: 'https://radiopaedia.org/images/52905467/16e8b85a39d8d30b56fa3d42e95d4f.jpeg',
                patientId: 'PT-2024-001',
                scanType: 'T1-weighted MRI',
                actualDiagnosis: 'Glioma',
                confidence: 0.94,
                probabilities: { 'Glioma': 0.94, 'No Tumor': 0.03, 'Meningioma': 0.02, 'Pituitary': 0.01 }
            },
            {
                id: 2,
                imageUrl: 'https://radiopaedia.org/images/52905468/7c9e1f2d8a1b5c4e9f6a7b8c9d0e1f2g.jpeg',
                patientId: 'PT-2024-002',
                scanType: 'T2-weighted MRI',
                actualDiagnosis: 'No Tumor',
                confidence: 0.97,
                probabilities: { 'No Tumor': 0.97, 'Glioma': 0.02, 'Meningioma': 0.01, 'Pituitary': 0.00 }
            },
            {
                id: 3,
                imageUrl: 'https://radiopaedia.org/images/52905469/3f4e5d6c7b8a9e0f1a2b3c4d5e6f7g8h.jpeg',
                patientId: 'PT-2024-003',
                scanType: 'FLAIR MRI',
                actualDiagnosis: 'Meningioma',
                confidence: 0.91,
                probabilities: { 'Meningioma': 0.91, 'No Tumor': 0.05, 'Glioma': 0.03, 'Pituitary': 0.01 }
            },
            {
                id: 4,
                imageUrl: 'https://radiopaedia.org/images/52905470/8h7g6f5e4d3c2b1a0f9e8d7c6b5a4g3f.jpeg',
                patientId: 'PT-2024-004',
                scanType: 'T1-weighted MRI',
                actualDiagnosis: 'Pituitary',
                confidence: 0.89,
                probabilities: { 'Pituitary': 0.89, 'No Tumor': 0.07, 'Meningioma': 0.03, 'Glioma': 0.01 }
            },
            {
                id: 5,
                imageUrl: 'https://radiopaedia.org/images/52905471/2b3c4d5e6f7g8h9i0j1k2l3m4n5o6p7q.jpeg',
                patientId: 'PT-2024-005',
                scanType: 'T2-weighted MRI',
                actualDiagnosis: 'Glioma',
                confidence: 0.92,
                probabilities: { 'Glioma': 0.92, 'Meningioma': 0.04, 'No Tumor': 0.03, 'Pituitary': 0.01 }
            },
            {
                id: 6,
                imageUrl: 'https://radiopaedia.org/images/52905472/5o6p7q8r9s0t1u2v3w4x5y6z7a8b9c0d.jpeg',
                patientId: 'PT-2024-006',
                scanType: 'FLAIR MRI',
                actualDiagnosis: 'No Tumor',
                confidence: 0.95,
                probabilities: { 'No Tumor': 0.95, 'Glioma': 0.03, 'Meningioma': 0.01, 'Pituitary': 0.01 }
            },
            {
                id: 7,
                imageUrl: 'https://radiopaedia.org/images/52905473/9c0d1e2f3g4h5i6j7k8l9m0n1o2p3q4r.jpeg',
                patientId: 'PT-2024-007',
                scanType: 'T1-weighted MRI',
                actualDiagnosis: 'Meningioma',
                confidence: 0.88,
                probabilities: { 'Meningioma': 0.88, 'No Tumor': 0.08, 'Glioma': 0.03, 'Pituitary': 0.01 }
            },
            {
                id: 8,
                imageUrl: 'https://radiopaedia.org/images/52905474/3q4r5s6t7u8v9w0x1y2z3a4b5c6d7e8f.jpeg',
                patientId: 'PT-2024-008',
                scanType: 'T2-weighted MRI',
                actualDiagnosis: 'Pituitary',
                confidence: 0.93,
                probabilities: { 'Pituitary': 0.93, 'No Tumor': 0.04, 'Meningioma': 0.02, 'Glioma': 0.01 }
            },
            {
                id: 9,
                imageUrl: 'https://radiopaedia.org/images/52905475/7e8f9g0h1i2j3k4l5m6n7o8p9q0r1s2t.jpeg',
                patientId: 'PT-2024-009',
                scanType: 'FLAIR MRI',
                actualDiagnosis: 'Glioma',
                confidence: 0.96,
                probabilities: { 'Glioma': 0.96, 'Meningioma': 0.02, 'No Tumor': 0.01, 'Pituitary': 0.01 }
            },
            {
                id: 10,
                imageUrl: 'https://radiopaedia.org/images/52905476/1s2t3u4v5w6x7y8z9a0b1c2d3e4f5g6h.jpeg',
                patientId: 'PT-2024-010',
                scanType: 'T1-weighted MRI',
                actualDiagnosis: 'No Tumor',
                confidence: 0.98,
                probabilities: { 'No Tumor': 0.98, 'Glioma': 0.01, 'Meningioma': 0.01, 'Pituitary': 0.00 }
            },
            {
                id: 11,
                imageUrl: 'https://radiopaedia.org/images/52905477/5g6h7i8j9k0l1m2n3o4p5q6r7s8t9u0v.jpeg',
                patientId: 'PT-2024-011',
                scanType: 'T2-weighted MRI',
                actualDiagnosis: 'Meningioma',
                confidence: 0.87,
                probabilities: { 'Meningioma': 0.87, 'No Tumor': 0.09, 'Glioma': 0.03, 'Pituitary': 0.01 }
            },
            {
                id: 12,
                imageUrl: 'https://radiopaedia.org/images/52905478/9u0v1w2x3y4z5a6b7c8d9e0f1g2h3i4j.jpeg',
                patientId: 'PT-2024-012',
                scanType: 'FLAIR MRI',
                actualDiagnosis: 'Pituitary',
                confidence: 0.90,
                probabilities: { 'Pituitary': 0.90, 'No Tumor': 0.06, 'Meningioma': 0.03, 'Glioma': 0.01 }
            }
        ];

        // Fallback placeholder images for demo purposes
        const placeholderImages = [
            'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjNmNGY2Ii8+PHRleHQgeD0iNTAlIiB5PSI0NSUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzZiNzI4MCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+R2xpb21hIE1SSSBTY2FuPC90ZXh0Pjx0ZXh0IHg9IjUwJSIgeT0iNTUlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiIGZpbGw9IiM5Y2EzYWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiPlQxLXdlaWdodGVkPC90ZXh0PjwvcGF0aD48L3N2Zz4=',
            'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZWZmNmZmIi8+PHRleHQgeD0iNTAlIiB5PSI0NSUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzZiNzI4MCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+Tm9ybWFsIEJyYWluPC90ZXh0Pjx0ZXh0IHg9IjUwJSIgeT0iNTUlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiIGZpbGw9IiM5Y2EzYWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiPlQyLXdlaWdodGVkPC90ZXh0PjwvcGF0aD48L3N2Zz4=',
            'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZmVmMmYyIi8+PHRleHQgeD0iNTAlIiB5PSI0NSUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzZiNzI4MCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+TWVuaW5naW9tYTwvdGV4dD48dGV4dCB4PSI1MCUiIHk9IjU1JSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEyIiBmaWxsPSIjOWNhM2FmIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5GTEFJUjwvdGV4dD48L3BhdGg+PC9zdmc+',
            'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjlmYWZiIi8+PHRleHQgeD0iNTAlIiB5PSI0NSUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzZiNzI4MCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+UGl0dWl0YXJ5IFR1bW9yPC90ZXh0Pjx0ZXh0IHg9IjUwJSIgeT0iNTUlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiIGZpbGw9IiM5Y2EzYWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiPlQxLXdlaWdodGVkPC90ZXh0PjwvcGF0aD48L3N2Zz4='
        ];

        let currentScanIndex = 0;
        let currentScan = null;

        // Initialize the app
        function initializeApp() {
            // Use placeholder images for demo
            mriScans.forEach((scan, index) => {
                scan.imageUrl = placeholderImages[index % placeholderImages.length];
            });
            
            loadCurrentScan();
        }

        function loadCurrentScan() {
            currentScan = mriScans[currentScanIndex];
            
            document.getElementById('loadingMRI').style.display = 'block';
            document.getElementById('currentMRI').style.display = 'none';
            
            const img = document.getElementById('currentMRI');
            img.onload = function() {
                document.getElementById('loadingMRI').style.display = 'none';
                img.style.display = 'block';
            };
            
            img.onerror = function() {
                // Fallback to placeholder if image fails to load
                img.src = placeholderImages[currentScanIndex % placeholderImages.length];
            };
            
            img.src = currentScan.imageUrl;
            
            document.getElementById('scanInfo').textContent = 
                `Scan ${currentScanIndex + 1} of ${mriScans.length} | ${currentScan.patientId} | ${currentScan.scanType}`;
            
            // Reset results
            document.getElementById('results').style.display = 'none';
            document.getElementById('loading').style.display = 'none';
            document.getElementById('placeholder').style.display = 'block';
        }

        function nextScan() {
            currentScanIndex = (currentScanIndex + 1) % mriScans.length;
            loadCurrentScan();
        }

        function previousScan() {
            currentScanIndex = (currentScanIndex - 1 + mriScans.length) % mriScans.length;
            loadCurrentScan();
        }

        function shuffleScan() {
            const newIndex = Math.floor(Math.random() * mriScans.length);
            if (newIndex !== currentScanIndex) {
                currentScanIndex = newIndex;
            } else {
                currentScanIndex = (currentScanIndex + 1) % mriScans.length;
            }
            loadCurrentScan();
        }

        function analyzeCurrentScan() {
            if (!currentScan) return;

            document.getElementById('loading').style.display = 'block';
            document.getElementById('results').style.display = 'none';
            document.getElementById('placeholder').style.display = 'none';
            document.getElementById('analyzeBtn').disabled = true;
            document.getElementById('analyzeBtn').textContent = 'Analyzing...';

            // Simulate AI analysis time
            setTimeout(() => {
                // Add some variation to the stored results for realism
                const variation = (Math.random() - 0.5) * 0.04; // ±2% variation
                const adjustedConfidence = Math.max(0.7, Math.min(0.99, currentScan.confidence + variation));
                
                // Adjust probabilities slightly
                const adjustedProbs = { ...currentScan.probabilities };
                const mainClass = currentScan.actualDiagnosis;
                adjustedProbs[mainClass] = adjustedConfidence;
                
                // Redistribute remaining probability
                const remaining = 1 - adjustedConfidence;
                const otherClasses = Object.keys(adjustedProbs).filter(cls => cls !== mainClass);
                otherClasses.forEach((cls, index) => {
                    if (index === otherClasses.length - 1) {
                        adjustedProbs[cls] = remaining - otherClasses.slice(0, -1).reduce((sum, c) => sum + adjustedProbs[c], 0);
                    } else {
                        adjustedProbs[cls] = Math.random() * remaining * 0.3;
                    }
                });

                displayResults(currentScan.actualDiagnosis, adjustedConfidence, adjustedProbs);
                
                document.getElementById('loading').style.display = 'none';
                document.getElementById('results').style.display = 'block';
                document.getElementById('analyzeBtn').disabled = false;
                document.getElementById('analyzeBtn').textContent = 'Analyze This Scan';
            }, 1500 + Math.random() * 1000); // 1.5-2.5 second analysis time
        }

        function displayResults(predictionClass, confidence, probabilities) {
            document.getElementById('predictionClass').textContent = `Prediction: ${predictionClass}`;
            document.getElementById('predictionConfidence').textContent = `Confidence: ${(confidence * 100).toFixed(1)}%`;

            const probDiv = document.getElementById('probabilities');
            probDiv.innerHTML = '';

            // Sort probabilities by value for better display
            const sortedProbs = Object.entries(probabilities).sort(([,a], [,b]) => b - a);

            sortedProbs.forEach(([className, prob]) => {
                const item = document.createElement('div');
                item.className = 'result-item';
                item.innerHTML = `
                    <span style="font-weight: ${className === predictionClass ? 'bold' : 'normal'}; color: ${className === predictionClass ? '#1e40af' : '#374151'}">${className}</span>
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${Math.max(0, prob * 100)}%; background: ${className === predictionClass ? '#2563eb' : '#9ca3af'}"></div>
                        </div>
                        <span style="font-size: 0.875rem; color: #6b7280; min-width: 45px;">${(prob * 100).toFixed(1)}%</span>
                    </div>
                `;
                probDiv.appendChild(item);
            });
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>
</html>
